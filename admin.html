<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Osun Beauty &amp; Boutique | Content Studio</title>
  <meta name="description" content="Internal dashboard for Osun Beauty &amp; Boutique to update homepage messaging, categories, and imagery." />
  <link rel="canonical" href="https://osun.example.com/admin" />

  <meta property="og:title" content="Osun Content Studio" />
  <meta property="og:description" content="Refresh hero copy, categories, and imagery for Osun Beauty &amp; Boutique." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="hero.jpg" />
  <meta property="og:url" content="https://osun.example.com/admin" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter','ui-sans-serif','system-ui'] },
          colors: { brand: { red:'#E11D48', yellow:'#F59E0B' } },
          boxShadow: { elev: '0 10px 30px -12px rgba(0,0,0,0.25)' }
        }
      }
    };
  </script>

  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

  <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-white text-gray-800">
  <div class="entry-overlay" aria-hidden="true">
    <div class="entry-logo text-2xl md:text-3xl">
      <span class="entry-dot"></span>
      <span>Osun Beauty &amp; Boutique</span>
    </div>
  </div>

  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between" data-aos="fade-down">
      <a href="index.html#hero" class="flex items-center gap-2" aria-label="Osun home">
        <span class="h-8 w-8 rounded-full bg-brand.red inline-block shadow-elev"></span>
        <span class="text-xl sm:text-2xl font-extrabold tracking-tight text-brand.red">Osun Beauty &amp; Boutique</span>
      </a>
      <nav class="hidden md:flex items-center gap-6" aria-label="Primary navigation">
        <a href="index.html#shop" class="hover:text-brand.yellow transition" data-i18n="nav.shop">Shop</a>
        <a href="categories.html" class="hover:text-brand.yellow transition" data-i18n="nav.categories">Categories</a>
        <a href="about.html" class="hover:text-brand.yellow transition" data-i18n="nav.about">About</a>
        <a href="admin.html" class="text-brand.red font-semibold" data-i18n="admin.nav">Admin</a>
        <a href="index.html#visit" class="hover:text-brand.yellow transition" data-i18n="nav.visit">Visit Us</a>
      </nav>
      <div class="flex items-center gap-2">
        <button id="lang-zh" class="px-3 py-1 rounded-full border hover:shadow-elev hover:-translate-y-0.5 transition text-sm" aria-label="切換中文">中文</button>
        <button id="lang-en" class="px-3 py-1 rounded-full border hover:shadow-elev hover:-translate-y-0.5 transition text-sm" aria-label="Switch to English">EN</button>
        <button id="menu-toggle" class="md:hidden p-2 rounded-lg border hover:shadow-elev" aria-label="Toggle menu" aria-expanded="false" aria-controls="mobile-menu">
          <svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
        </button>
      </div>
    </div>
    <nav id="mobile-menu" class="md:hidden hidden border-t bg-white" aria-label="Mobile navigation">
      <div class="px-4 py-3 space-y-2">
        <a href="index.html#shop" class="block py-2" data-i18n="nav.shop">Shop</a>
        <a href="categories.html" class="block py-2" data-i18n="nav.categories">Categories</a>
        <a href="about.html" class="block py-2" data-i18n="nav.about">About</a>
        <a href="admin.html" class="block py-2 font-semibold text-brand.red" data-i18n="admin.nav">Admin</a>
        <a href="index.html#visit" class="block py-2" data-i18n="nav.visit">Visit Us</a>
      </div>
    </nav>
  </header>

  <main class="bg-gradient-to-br from-rose-50 via-white to-amber-50">
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-16" data-aos="fade-up">
      <div class="rounded-3xl bg-white/80 p-8 shadow-elev backdrop-blur">
        <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900" data-i18n="admin.title">Osun Content Studio</h1>
        <p class="mt-3 text-gray-600" data-i18n="admin.subtitle">Update homepage copy, surface new categories, and refresh hero imagery before publishing.</p>
        <div class="mt-6 grid gap-6 md:grid-cols-2">
          <div class="rounded-2xl border border-rose-100 bg-rose-50/60 p-6">
            <p class="text-sm font-semibold uppercase tracking-widest text-brand.red" data-i18n="admin.status.storage">Local save</p>
            <p class="mt-2 text-sm text-gray-600" data-i18n="admin.status.storageDesc">Changes are stored in your browser. Export JSON when you are ready to push live.</p>
          </div>
          <div class="rounded-2xl border border-amber-100 bg-amber-50/60 p-6">
            <p class="text-sm font-semibold uppercase tracking-widest text-brand.red" data-i18n="admin.status.workflow">Workflow tip</p>
            <p class="mt-2 text-sm text-gray-600" data-i18n="admin.status.workflowDesc">After saving, share the export file with your web developer or replace content manually.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="max-w-7xl mx-auto px-4 sm:px-6 pb-16 space-y-10">
      <div class="grid gap-8 lg:grid-cols-[1fr,0.8fr]" data-aos="fade-up">
        <div class="rounded-3xl bg-white p-8 shadow-sm">
          <h2 class="text-2xl font-semibold text-gray-900" data-i18n="admin.hero.heading">Homepage hero</h2>
          <p class="mt-2 text-gray-600" data-i18n="admin.hero.desc">Adjust the main headline, supporting copy, and call-to-action buttons.</p>
          <form id="hero-form" class="mt-6 space-y-5">
            <div>
              <label for="hero-title" class="block text-sm font-medium text-gray-700" data-i18n="admin.hero.title">Hero title</label>
              <input id="hero-title" name="hero-title" type="text" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" required />
            </div>
            <div>
              <label for="hero-subtitle" class="block text-sm font-medium text-gray-700" data-i18n="admin.hero.subtitle">Hero subtitle</label>
              <textarea id="hero-subtitle" name="hero-subtitle" rows="3" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red"></textarea>
            </div>
            <div class="grid gap-4 md:grid-cols-2">
              <div>
                <label for="hero-cta" class="block text-sm font-medium text-gray-700" data-i18n="admin.hero.cta">Primary CTA</label>
                <input id="hero-cta" name="hero-cta" type="text" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" />
              </div>
              <div>
                <label for="hero-secondary" class="block text-sm font-medium text-gray-700" data-i18n="admin.hero.secondary">Secondary CTA</label>
                <input id="hero-secondary" name="hero-secondary" type="text" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" />
              </div>
            </div>
            <div>
              <label for="hero-image-url" class="block text-sm font-medium text-gray-700" data-i18n="admin.hero.imageUrl">Hero image URL</label>
              <input id="hero-image-url" name="hero-image-url" type="url" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700" for="hero-image-upload" data-i18n="admin.hero.imageUpload">Upload new hero image</label>
              <input id="hero-image-upload" type="file" accept="image/*" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" />
            </div>
            <div class="flex flex-wrap items-center gap-4">
              <button type="submit" class="shine-btn inline-flex items-center rounded-full bg-brand.red px-6 py-2 font-semibold text-white hover:bg-rose-600 transition" data-i18n="admin.hero.save">Save hero section</button>
              <button type="button" id="hero-reset" class="inline-flex items-center rounded-full border border-gray-300 px-6 py-2 font-semibold text-gray-700 hover:bg-gray-50 transition" data-i18n="admin.hero.reset">Reset to defaults</button>
              <span id="hero-status" class="text-sm text-gray-500"></span>
            </div>
          </form>
        </div>
        <div class="rounded-3xl bg-white p-8 shadow-sm">
          <h3 class="text-xl font-semibold text-gray-900" data-i18n="admin.preview.heading">Live preview</h3>
          <p class="mt-2 text-sm text-gray-600" data-i18n="admin.preview.desc">This preview reflects the text and image you save above.</p>
          <div class="mt-6 overflow-hidden rounded-3xl border">
            <div class="relative h-64 bg-gray-200">
              <img id="preview-hero-image" src="hero.jpg" alt="Hero preview" class="h-full w-full object-cover" />
              <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
              <div class="absolute inset-0 flex items-end p-6">
                <div class="space-y-2 text-white">
                  <h4 id="preview-hero-title" class="text-2xl font-bold">Elegance. Confidence. Osun.</h4>
                  <p id="preview-hero-subtitle" class="text-sm text-white/80">Discover your radiance where fashion meets inner glow.</p>
                  <div class="flex flex-wrap gap-2">
                    <span id="preview-hero-cta" class="inline-flex items-center rounded-full bg-brand.red px-4 py-1.5 text-sm font-semibold">Shop Now</span>
                    <span id="preview-hero-secondary" class="inline-flex items-center rounded-full border border-white/70 px-4 py-1.5 text-sm font-semibold">Explore Beauty</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="rounded-3xl bg-white p-8 shadow-sm" data-aos="fade-up">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div>
            <h2 class="text-2xl font-semibold text-gray-900" data-i18n="admin.categories.heading">Category library</h2>
            <p class="mt-2 text-gray-600" data-i18n="admin.categories.desc">Add new collections and reorder highlights for the categories page.</p>
          </div>
          <button id="export-json" class="shine-btn inline-flex items-center rounded-full bg-brand.red px-6 py-2 font-semibold text-white hover:bg-rose-600 transition" data-i18n="admin.categories.export">Export JSON</button>
        </div>
        <form id="category-form" class="mt-6 grid gap-4 md:grid-cols-[2fr,2fr,1fr,auto]">
          <div>
            <label for="category-name" class="block text-sm font-medium text-gray-700" data-i18n="admin.categories.name">Category name</label>
            <input id="category-name" name="category-name" type="text" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" required />
          </div>
          <div>
            <label for="category-desc" class="block text-sm font-medium text-gray-700" data-i18n="admin.categories.description">Description</label>
            <input id="category-desc" name="category-desc" type="text" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" />
          </div>
          <div>
            <label for="category-group" class="block text-sm font-medium text-gray-700" data-i18n="admin.categories.group">Group</label>
            <select id="category-group" name="category-group" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red">
              <option value="apparel" data-i18n="admin.categories.group.apparel">Apparel</option>
              <option value="beauty" data-i18n="admin.categories.group.beauty">Beauty</option>
              <option value="lifestyle" data-i18n="admin.categories.group.lifestyle">Lifestyle</option>
            </select>
          </div>
          <div class="flex items-end">
            <button type="submit" class="inline-flex items-center rounded-full bg-brand.red px-4 py-2 font-semibold text-white hover:bg-rose-600 transition" data-i18n="admin.categories.add">Add</button>
          </div>
        </form>
        <div class="mt-6 overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200 text-sm">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-4 py-3 text-left font-semibold text-gray-600" data-i18n="admin.categories.table.name">Name</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-600" data-i18n="admin.categories.table.description">Description</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-600" data-i18n="admin.categories.table.group">Group</th>
                <th class="px-4 py-3 text-right font-semibold text-gray-600" data-i18n="admin.categories.table.actions">Actions</th>
              </tr>
            </thead>
            <tbody id="category-table" class="divide-y divide-gray-100 bg-white"></tbody>
          </table>
      </div>
    </div>

    <div class="rounded-3xl bg-white p-8 shadow-sm" data-aos="fade-up">
      <h2 class="text-2xl font-semibold text-gray-900" data-i18n="admin.quick.heading">Quick content update</h2>
      <p class="mt-2 text-gray-600" data-i18n="admin.quick.desc">Use this lightweight form to jot down a new product highlight and log incoming imagery before sharing with the developer.</p>
      <form id="quick-update-form" class="mt-6 space-y-5">
        <div>
          <label for="quick-title" class="block text-sm font-medium text-gray-700" data-i18n="admin.quick.titleLabel">Product or collection name</label>
          <input id="quick-title" name="quick-title" type="text" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" placeholder="Osun Signature Dress" />
        </div>
        <div>
          <label for="quick-image" class="block text-sm font-medium text-gray-700" data-i18n="admin.quick.imageLabel">Upload inspiration image</label>
          <input id="quick-image" name="quick-image" type="file" class="mt-1 w-full rounded-xl border-gray-200 focus:border-brand.red focus:ring-brand.red" />
        </div>
        <button type="submit" class="shine-btn inline-flex items-center rounded-full bg-brand.red px-6 py-2 font-semibold text-white hover:bg-rose-600 transition" data-i18n="admin.quick.submit">Log update</button>
      </form>
      <p id="quick-update-result" class="mt-4 text-sm text-gray-600"></p>
    </div>

    <div class="rounded-3xl bg-white p-8 shadow-sm" data-aos="fade-up">
      <h2 class="text-2xl font-semibold text-gray-900" data-i18n="admin.notes.heading">Publishing notes</h2>
      <p class="mt-2 text-gray-600" data-i18n="admin.notes.desc">Share the exported configuration or manually replace copy within the HTML files. For rapid updates, coordinate with your developer to connect these inputs to a CMS or headless backend.</p>
        <ul class="mt-4 space-y-2 text-gray-600 list-disc pl-6">
          <li>
            <span data-i18n="admin.notes.item1.prefix">Homepage hero updates live in</span>
            <code class="rounded bg-gray-100 px-1">index.html</code>.
          </li>
          <li>
            <span data-i18n="admin.notes.item2.prefix">Category cards can be updated in</span>
            <code class="rounded bg-gray-100 px-1">categories.html</code>.
          </li>
          <li>
            <span data-i18n="admin.notes.item3.prefix">Founder story copy resides in</span>
            <code class="rounded bg-gray-100 px-1">about.html</code>.
          </li>
        </ul>
      </div>
    </section>
  </main>

  <footer class="bg-gray-900 text-gray-300" data-aos="fade-up">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-12 grid md:grid-cols-4 gap-10">
      <div>
        <p class="text-yellow-400 font-semibold">Osun Beauty &amp; Boutique</p>
        <p class="mt-3 text-sm text-gray-400">© 2025 Osun. All Rights Reserved.</p>
      </div>
      <div>
        <p class="font-semibold text-white" data-i18n="foot.shop">Shop</p>
        <ul class="mt-3 space-y-2 text-sm">
          <li><a href="index.html#categories" class="hover:text-white" data-i18n="cat.dresses">Dresses</a></li>
          <li><a href="index.html#categories" class="hover:text-white" data-i18n="cat.tops">Tops &amp; Blouses</a></li>
          <li><a href="index.html#beauty" class="hover:text-white" data-i18n="cat.beauty">Beauty</a></li>
        </ul>
      </div>
      <div>
        <p class="font-semibold text-white" data-i18n="foot.support">Support</p>
        <ul class="mt-3 space-y-2 text-sm">
          <li><a href="shipping.html" class="hover:text-white" data-i18n="pol.ship">Shipping</a></li>
          <li><a href="returns.html" class="hover:text-white" data-i18n="pol.return">Returns</a></li>
          <li><a href="privacy.html" class="hover:text-white" data-i18n="pol.privacy">Privacy</a></li>
          <li><a href="admin.html" class="hover:text-white" data-i18n="foot.admin">Admin</a></li>
        </ul>
      </div>
      <div>
        <p class="font-semibold text-white" data-i18n="foot.follow">Follow</p>
        <div class="mt-3 flex items-center gap-3">
          <a href="#" aria-label="Instagram" class="hover:text-white">IG</a>
          <a href="#" aria-label="Facebook" class="hover:text-white">FB</a>
          <a href="#" aria-label="TikTok" class="hover:text-white">TT</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const STORAGE_KEY = 'osun-admin-config';
    const DEFAULT_CONFIG = {
      hero: {
        title: 'Elegance. Confidence. Osun.',
        subtitle: 'Discover your radiance where fashion meets inner glow.',
        cta: 'Shop Now',
        secondary: 'Explore Beauty',
        imageUrl: 'hero.jpg',
        imageData: null
      },
      categories: [
        { name: 'Statement Dresses', description: 'Romantic silhouettes, petite to plus sizing, and special-occasion exclusives.', group: 'apparel' },
        { name: 'Glow Skincare Rituals', description: 'Cleansers, essences, serums, and creams curated for humid climates.', group: 'beauty' },
        { name: 'Bridal Studio', description: 'Made-to-measure gowns, veil styling, and premium fitting appointments.', group: 'lifestyle' }
      ]
    };

    function clone(value){
      if (typeof structuredClone === 'function') {
        return structuredClone(value);
      }
      return JSON.parse(JSON.stringify(value));
    }

    function localText(en, zh){
      return document.documentElement.lang === 'zh-Hant' ? zh : en;
    }

    function loadConfig(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return clone(DEFAULT_CONFIG);
        const parsed = JSON.parse(raw);
        return {
          hero: { ...DEFAULT_CONFIG.hero, ...(parsed.hero || {}) },
          categories: Array.isArray(parsed.categories) && parsed.categories.length ? parsed.categories : clone(DEFAULT_CONFIG.categories)
        };
      } catch (error){
        console.warn('Failed to parse admin config, resetting to defaults', error);
        return clone(DEFAULT_CONFIG);
      }
    }

    function saveConfig(config){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(config));
    }

    function showStatus(target, message){
      if (!target) return;
      target.textContent = message;
      setTimeout(() => { target.textContent = ''; }, 2500);
    }

    function updatePreview(hero){
      document.getElementById('preview-hero-title').textContent = hero.title || DEFAULT_CONFIG.hero.title;
      document.getElementById('preview-hero-subtitle').textContent = hero.subtitle || DEFAULT_CONFIG.hero.subtitle;
      document.getElementById('preview-hero-cta').textContent = hero.cta || DEFAULT_CONFIG.hero.cta;
      document.getElementById('preview-hero-secondary').textContent = hero.secondary || DEFAULT_CONFIG.hero.secondary;
      const img = document.getElementById('preview-hero-image');
      if (hero.imageData){
        img.src = hero.imageData;
      } else if (hero.imageUrl){
        img.src = hero.imageUrl;
      } else {
        img.src = DEFAULT_CONFIG.hero.imageUrl;
      }
    }

    function renderCategories(categories){
      const table = document.getElementById('category-table');
      table.innerHTML = '';
      if (!categories.length){
        const emptyRow = document.createElement('tr');
        const cell = document.createElement('td');
        cell.colSpan = 4;
        cell.className = 'px-4 py-6 text-center text-gray-500';
        cell.textContent = localText('No categories saved yet.', '尚未新增分類。');
        emptyRow.appendChild(cell);
        table.appendChild(emptyRow);
        return;
      }
      const groupLabels = {
        apparel: localText('Apparel', '服飾'),
        beauty: localText('Beauty', '美妝'),
        lifestyle: localText('Lifestyle', '生活')
      };
      categories.forEach((category, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="px-4 py-3 font-medium text-gray-900">${category.name}</td>
          <td class="px-4 py-3 text-gray-600">${category.description || ''}</td>
          <td class="px-4 py-3 capitalize text-gray-600">${groupLabels[category.group] || category.group}</td>
          <td class="px-4 py-3 text-right">
            <button data-index="${index}" class="remove-category text-brand.red hover:underline" type="button">${localText('Remove', '移除')}</button>
          </td>
        `;
        table.appendChild(row);
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      AOS.init({ duration: 800, once: true, easing: 'ease-out-cubic' });
      const config = loadConfig();

      const heroForm = document.getElementById('hero-form');
      const heroStatus = document.getElementById('hero-status');
      const heroReset = document.getElementById('hero-reset');
      const heroImageUpload = document.getElementById('hero-image-upload');
      const heroImageUrlInput = document.getElementById('hero-image-url');

      heroForm.hero-title.value = config.hero.title;
      heroForm['hero-subtitle'].value = config.hero.subtitle;
      heroForm['hero-cta'].value = config.hero.cta;
      heroForm['hero-secondary'].value = config.hero.secondary;
      heroImageUrlInput.value = config.hero.imageUrl;
      updatePreview(config.hero);

      heroForm.addEventListener('submit', event => {
        event.preventDefault();
        config.hero.title = heroForm['hero-title'].value.trim();
        config.hero.subtitle = heroForm['hero-subtitle'].value.trim();
        config.hero.cta = heroForm['hero-cta'].value.trim();
        config.hero.secondary = heroForm['hero-secondary'].value.trim();
        config.hero.imageUrl = heroImageUrlInput.value.trim();
        saveConfig(config);
        updatePreview(config.hero);
        showStatus(heroStatus, localText('Changes saved.', '已儲存變更。'));
      });

      heroReset.addEventListener('click', () => {
        config.hero = clone(DEFAULT_CONFIG.hero);
        heroForm.hero-title.value = config.hero.title;
        heroForm['hero-subtitle'].value = config.hero.subtitle;
        heroForm['hero-cta'].value = config.hero.cta;
        heroForm['hero-secondary'].value = config.hero.secondary;
        heroImageUrlInput.value = config.hero.imageUrl;
        config.hero.imageData = null;
        saveConfig(config);
        updatePreview(config.hero);
        showStatus(heroStatus, localText('Reset to defaults.', '已恢復預設值。'));
      });

      heroImageUpload.addEventListener('change', event => {
        const file = event.target.files?.[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = e => {
          config.hero.imageData = e.target?.result;
          saveConfig(config);
          updatePreview(config.hero);
          showStatus(heroStatus, localText('Image updated.', '圖片已更新。'));
        };
        reader.readAsDataURL(file);
      });

      const categoryForm = document.getElementById('category-form');
      const categoryTable = document.getElementById('category-table');

      renderCategories(config.categories);

      categoryForm.addEventListener('submit', event => {
        event.preventDefault();
        const name = categoryForm['category-name'].value.trim();
        if (!name) return;
        const description = categoryForm['category-desc'].value.trim();
        const group = categoryForm['category-group'].value;
        config.categories.push({ name, description, group });
        saveConfig(config);
        renderCategories(config.categories);
        categoryForm.reset();
      });

      categoryTable.addEventListener('click', event => {
        const target = event.target.closest('.remove-category');
        if (!target) return;
        const index = Number(target.getAttribute('data-index'));
        if (Number.isNaN(index)) return;
        config.categories.splice(index, 1);
        saveConfig(config);
        renderCategories(config.categories);
      });

      const rerenderForLang = () => renderCategories(config.categories);
      document.getElementById('lang-zh')?.addEventListener('click', () => setTimeout(rerenderForLang, 0));
      document.getElementById('lang-en')?.addEventListener('click', () => setTimeout(rerenderForLang, 0));

      document.getElementById('export-json').addEventListener('click', () => {
        const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = 'osun-content-config.json';
        document.body.appendChild(link);
        link.click();
        link.remove();
        URL.revokeObjectURL(url);
      });

      const quickForm = document.getElementById('quick-update-form');
      const quickResult = document.getElementById('quick-update-result');
      if (quickForm && quickResult){
        quickForm.addEventListener('submit', event => {
          event.preventDefault();
          const titleInput = quickForm['quick-title'].value.trim();
          const file = quickForm['quick-image'].files?.[0];
          const safeTitle = titleInput || localText('No title entered', '未輸入名稱');
          const imageLabel = file ? file.name : localText('No image selected', '未選擇圖片');
          const template = localText('Updated: {title} (Image: {image})', '已成功更新：{title}（圖片：{image}）');
          quickResult.textContent = template.replace('{title}', safeTitle).replace('{image}', imageLabel);
          quickForm.reset();
        });
      }
    });
  </script>

  <script src="i18n-cart.js"></script>
</body>
</html>
